(this.webpackJsonpauth=this.webpackJsonpauth||[]).push([[0],{39:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(2),r=n.n(c),s=n(31),i=n.n(s),l=(n(39),n(8)),o=n(18),u=n(4),b=n(23);n(51),n(41);b.a.initializeApp({apiKey:"AIzaSyDcmZJEYW1kcebw_85jNdBfEMsLzqu4pBE",authDomain:"authdev-f242a.firebaseapp.com",projectId:"authdev-f242a",storageBucket:"authdev-f242a.appspot.com",messagingSenderId:"987484057824",appId:"1:987484057824:web:86bebb5aeb6d437ef4e085"});var d=b.a.firestore(),j=b.a.auth(),m=n(33),h=n(9),O=n.n(h),p=n(24),f=n(15),x=n(27),v=n.n(x),g=(n(45),function(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),u=o[0],b=o[1],j=Object(c.useState)(!1),h=Object(l.a)(j,2),x=h[0],g=h[1],k=Object(c.useState)(""),N=Object(l.a)(k,2),w=N[0],y=N[1];Object(c.useEffect)((function(){(function(){var t=Object(f.a)(O.a.mark((function t(){var n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.collection(e.user.email).get();case 3:n=t.sent,console.log(n),a=n.docs.map((function(e){return Object(p.a)({id:e.id},e.data())})),s(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("error::",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}})()()}),[e.user.email]);var E=function(){var t=Object(f.a)(O.a.mark((function t(n){var a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),u.trim()){t.next=4;break}return console.log("Por favor valida que no este vacio"),t.abrupt("return");case 4:return t.prev=4,a={name:u,date:Date.now()},t.next=8,d.collection(e.user.email).add(a);case 8:c=t.sent,s([].concat(Object(m.a)(r),[Object(p.a)(Object(p.a)({},a),{},{id:c.id})])),b(""),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.log("Falla",t.t0);case 16:console.log("task",u);case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.collection("task").doc(t).delete();case 3:n=r.filter((function(e){return e.id!==t})),s(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("task",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),u.trim()){t.next=4;break}return console.log("Valida que no este vacio"),t.abrupt("return");case 4:return t.prev=4,t.next=7,d.collection(e.user.email).doc(w).update({name:u});case 7:a=r.map((function(e){return e.id===w?{id:e.id,date:e.date,name:u}:e})),g(!1),b(""),y(""),s(a),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"container m-5",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)("h1",{children:"Tareas Por hacer"}),Object(a.jsx)("ul",{className:"list-group",children:0===r.length?Object(a.jsx)("li",{className:"list-group-item",children:"No hay tareas para mostar"}):r.map((function(e){return Object(a.jsx)("li",{className:"list-group-item ",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsxs)("span",{className:"lead mb-2",children:[e.name,"-",v()(e.date).format("LLL")]})}),Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)("button",{className:"btn btn-danger btn-sm float-right mx-2",onClick:function(){return S(e.id)},children:"Eliminar Tarea"}),Object(a.jsx)("button",{className:"btn btn-warning btn-sm float-right ",onClick:function(){return function(e){g(!0),b(e.name),y(e.id)}(e)},children:"Editar Tarea"})]})]})},e.id)}))})]}),Object(a.jsxs)("div",{className:"col-md-6",children:[Object(a.jsx)("h1",{children:"Formulario"}),Object(a.jsx)("h2",{children:x?"Editar Tarea":"Agregar Tarea"}),Object(a.jsxs)("form",{onSubmit:x?C:E,children:[Object(a.jsx)("input",{type:"text",placeholder:"Ingresa la tarea",className:"form-control mb-2",onChange:function(e){return b(e.target.value)},value:u}),Object(a.jsx)("button",{className:x?"btn btn-warning btn-block":"btn btn-dark btn-block",type:"submit",children:x?"Editar":"Agregar"})]})]})]})})}),k=Object(u.f)((function(e){var t=Object(c.useState)(null),n=Object(l.a)(t,2),r=n[0],s=n[1];return Object(c.useEffect)((function(){j.currentUser?s(j.currentUser):(console.log("admin",e.history),e.history.push("/login"))}),[e.history]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Admin"}),r&&Object(a.jsx)(g,{user:r})]})})),N=Object(u.f)((function(e){return Object(a.jsxs)("div",{className:"navbar navbar-dark bg-dark",children:[Object(a.jsx)(o.b,{className:"navbar-brand",to:"/",children:"Auth"}),Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)(o.c,{className:"btn btn-dark mr-2",to:"/",exact:!0,children:"Inicio"}),null!==e.userDB?Object(a.jsx)(o.c,{className:"btn btn-dark mr-2",to:"/admin",children:"Admin"}):null,null!==e.userDB?Object(a.jsx)("button",{className:"btn btn-dark",onClick:function(){j.signOut().then((function(){console.log(e),e.history.push("/login")})).catch((function(e){console.log(e)}))},children:"Cerrar sesion"}):Object(a.jsx)(o.c,{className:"btn btn-dark mr2",to:"/login",children:"Login"})]})})]})})),w=Object(u.f)((function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),u=o[0],b=o[1],m=Object(c.useState)(!0),h=Object(l.a)(m,2),p=h[0],x=h[1],v=Object(c.useState)(null),g=Object(l.a)(v,2),k=g[0],N=g[1],w=Object(c.useCallback)(Object(f.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.signInWithEmailAndPassword(r,u);case 3:t.sent,s(""),b(""),N(null),e.history.push("/admin"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"auth/invalid-email"===t.t0.code&&N("Email no valido"),"auth/user-not-found"===t.t0.code&&N("Email no registrado ..."),"auth/wrong-password"===t.t0.code&&N("Contrase\xf1a incorrecta ...");case 15:case"end":return t.stop()}}),t,null,[[0,10]])}))),[r,u,e.history]),y=Object(c.useCallback)(Object(f.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.createUserWithEmailAndPassword(r,u);case 3:return n=t.sent,t.next=6,d.collection("users").doc(n.user.uid).set({email:n.user.email,uid:n.user.uid});case 6:return t.next=8,d.collection(n.user.email).add({name:"task new",date:Date.now()});case 8:s(""),b(""),N(null),e.history.push("/admin"),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0),"auth/invalid-email"===t.t0.code&&N("Email no valido"),"auth/email-already-in-use"===t.t0.code&&N("Email ya se encuentra registrado");case 19:case"end":return t.stop()}}),t,null,[[0,14]])}))),[r,u,e.history]);return Object(a.jsxs)("div",{className:"mt-5",children:[Object(a.jsx)("h3",{className:"text-center",children:p?"Registro de usuarios":"Login de acceso"}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("div",{className:"col-12 col-sm-8 col-md-6 col-xl-4",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r.trim()?u.trim()?u.length<6?N("Password debe ser mayor a 6"):(N(null),p?y():w()):N("Ingrese el password"):N("Ingrese el Email")},children:[k&&Object(a.jsx)("div",{className:"alert alert-danger",children:k}),Object(a.jsx)("input",{type:"email",className:"form-control mb-2",placeholder:"Ingrese su Email",onChange:function(e){return s(e.target.value)},value:r}),Object(a.jsx)("input",{type:"password",className:"form-control mb-2",placeholder:"Ingrese su Password",onChange:function(e){return b(e.target.value)},value:u}),Object(a.jsx)("button",{className:"btn btn-dark btn-lg btn-block mt-5",type:"submit",children:p?"Registrarse":"Acceder"}),Object(a.jsx)("button",{onClick:function(){return x(!p)},className:"btn btn-info btn-sm btn-block mb-2",type:"button",children:p?"\xbfYa tienes una cuenta?":"\xbfNo tienes cuenta?"}),p?null:Object(a.jsx)("button",{onClick:function(){return e.history.push("/reset")},className:"btn btn-danger btn-sm btn-block mb-2",type:"button",children:"Recuperar Contrase\xf1a"})]})})})]})})),y=Object(u.f)((function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(null),o=Object(l.a)(i,2),u=o[0],b=o[1],d=Object(c.useCallback)(Object(f.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.sendPasswordResetEmail(r);case 3:e.history.push("/login"),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0),b(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),[r,e.history]);return Object(a.jsxs)("div",{className:"mt-5",children:[Object(a.jsx)("h3",{className:"text-center",children:"Registrar Nueva contrase\xf1a"}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("div",{className:"col-12 col-sm-8 col-md-6 col-xl-4",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r.trim()?(b(null),d()):b("Ingrese el Email")},children:[u&&Object(a.jsx)("div",{className:"alert alert-danger",children:u}),Object(a.jsx)("input",{type:"email",className:"form-control mb-2",placeholder:"Ingrese su Email",onChange:function(e){return s(e.target.value)},value:r}),Object(a.jsx)("button",{className:"btn btn-dark btn-lg btn-block mt-5",type:"submit",children:"Reinicar Contrase\xf1a"})]})})})]})})),E=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){j.onAuthStateChanged((function(e){r(e||null)}))}),[]),!1!==n?Object(a.jsx)(o.a,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(N,{userDB:n}),Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{path:"/login",children:Object(a.jsx)(w,{})}),Object(a.jsx)(u.a,{path:"/admin",children:Object(a.jsx)(k,{})}),Object(a.jsx)(u.a,{path:"/reset",children:Object(a.jsx)(y,{})}),Object(a.jsx)(u.a,{path:"/",children:"Inicio..."})]})]})}):Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("p",{className:"mt-10",children:"Cargando ...."})})};var S=function(){return Object(a.jsx)(E,{})};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(S,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.4c20950c.chunk.js.map